<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–≤—Ç–æ–±—É—Å 283</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#121212">

    <style>
        :root { --bg: #121212; --card: #1e1e1e; --text: #e0e0e0; --accent: #bb86fc; --border: #333; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; padding-bottom: 50px; }
        .container { max-width: 600px; margin: auto; background: var(--card); border-radius: 12px; overflow: hidden; }
        header { background: #252525; padding: 25px 15px; text-align: center; border-bottom: 2px solid var(--accent); }
        h1 { margin: 0; font-size: 2.2rem; font-style: italic; text-transform: uppercase; letter-spacing: 2px; color: white; margin-bottom: 15px; }
        
        .quote-box { display: block; background: #2a2a2a; padding: 15px 20px; border-radius: 20px; border: 1px solid #444; margin: 0 auto 15px auto; width: fit-content; max-width: 95%; box-sizing: border-box; }
        #bible-quote { font-style: italic; font-size: 0.95rem; color: white; margin: 0; line-height: 1.5; text-align: center; }
        
        .weather-wish-box { padding: 5px 10px; font-size: 0.9rem; text-align: center; margin-top: 10px; }
        #weather-info { font-weight: bold; color: var(--accent); margin-bottom: 3px; display: block; }
        #wish-text { color: #aaa; line-height: 1.4; display: block; font-style: italic; }

        #timer-block { background: #2a2a2a; padding: 15px; text-align: center; display: none; border-bottom: 1px solid var(--border); }
        #countdown { font-size: 1.6rem; color: var(--accent); font-weight: bold; }
        
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px 5px; text-align: center; border-bottom: 1px solid var(--border); border-right: 1px solid var(--border); font-size: 0.85rem; }
        td { cursor: pointer; color: #fff; }
        .selected { background: #3700b3 !important; }

        .share-btn { display: block; width: 200px; margin: 20px auto; padding: 12px; background: transparent; border: 2px solid var(--accent); color: var(--accent); border-radius: 30px; font-weight: bold; cursor: pointer; text-align: center; transition: 0.3s; }
        .share-btn:active { background: var(--accent); color: #000; }

        .instructions { margin: 30px auto; max-width: 580px; padding: 15px; color: #bbb; font-size: 0.9rem; line-height: 1.6; border-top: 1px solid var(--border); }
        .instructions h3 { color: var(--accent); font-size: 1rem; margin-bottom: 10px; text-align: center; }
        .step { margin-bottom: 15px; background: #1a1a1a; padding: 10px; border-radius: 8px; }
        .step b { color: white; }

        .btn-cal { display: block; margin: 10px auto; padding: 10px 20px; background: var(--accent); color: #000; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; display: none; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>–ê–í–¢–û–ë–£–° 283</h1>
        <div class="quote-box">
            <div id="bible-quote">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
        </div>
        
        <div class="weather-wish-box">
            <span id="weather-info">–û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–≥–æ–¥–∏...</span>
            <span id="wish-text">–ì–∞—Ä–Ω–æ—ó –¥–æ—Ä–æ–≥–∏!</span>
        </div>
    </header>

    <div id="timer-block">
        <span id="countdown">00:00:00</span>
        <button class="btn-cal" id="calBtn" onclick="addToCalendar()">üìÖ –ù–∞–≥–∞–¥–∞—Ç–∏</button>
    </div>

    <table>
        <thead><tr><th>–ü–Ω ‚Äî –ü—Ç</th><th>–°—É–±–æ—Ç–∞</th><th>–ù–µ–¥—ñ–ª—è</th></tr></thead>
        <tbody>
            <tr><td onclick="selectTrip('06:00', this)">06:00 ‚Äî 06:30</td><td onclick="selectTrip('06:00', this)">06:00 ‚Äî 06:40</td><td onclick="selectTrip('06:30', this)">06:30 ‚Äî 07:10</td></tr>
            <tr><td onclick="selectTrip('06:30', this)">06:30 ‚Äî 07:10</td><td onclick="selectTrip('06:50', this)">06:50 ‚Äî 07:30</td><td onclick="selectTrip('07:30', this)">07:30 ‚Äî 08:10</td></tr>
            <tr><td onclick="selectTrip('07:00', this)">07:00 ‚Äî 07:40</td><td onclick="selectTrip('07:50', this)">07:50 ‚Äî 08:30</td><td onclick="selectTrip('08:50', this)">08:50 ‚Äî 09:30</td></tr>
            <tr><td onclick="selectTrip('07:40', this)">07:40 ‚Äî 08:20</td><td onclick="selectTrip('08:50', this)">08:50 ‚Äî 09:30</td><td onclick="selectTrip('10:30', this)">10:30 ‚Äî 11:30</td></tr>
            <tr><td onclick="selectTrip('08:10', this)">08:10 ‚Äî 08:45</td><td onclick="selectTrip('09:40', this)">09:40 ‚Äî 10:30</td><td onclick="selectTrip('12:30', this)">12:30 ‚Äî 13:30</td></tr>
            <tr><td onclick="selectTrip('09:00', this)">09:00 ‚Äî 09:40</td><td onclick="selectTrip('10:30', this)">10:30 ‚Äî 11:30</td><td onclick="selectTrip('14:30', this)">14:30 ‚Äî 15:30</td></tr>
            <tr><td onclick="selectTrip('10:30', this)">10:30 ‚Äî 11:00</td><td onclick="selectTrip('11:30', this)">11:30 ‚Äî 12:30</td><td onclick="selectTrip('16:40', this)">16:40 ‚Äî 17:20</td></tr>
            <tr><td onclick="selectTrip('12:00', this)">12:00 ‚Äî 12:30</td><td onclick="selectTrip('12:30', this)">12:30 ‚Äî 13:30</td><td onclick="selectTrip('18:00', this)">18:00 ‚Äî 18:40</td></tr>
            <tr><td onclick="selectTrip('13:30', this)">13:30 ‚Äî 14:00</td><td onclick="selectTrip('13:30', this)">13:30 ‚Äî 14:30</td><td onclick="selectTrip('19:40', this)">19:40 ‚Äî 20:10</td></tr>
            <tr><td onclick="selectTrip('14:30', this)">14:30 ‚Äî 15:00</td><td onclick="selectTrip('14:30', this)">14:30 ‚Äî 15:30</td><td>-</td></tr>
            <tr><td onclick="selectTrip('15:30', this)">15:30 ‚Äî 16:00</td><td onclick="selectTrip('15:30', this)">15:30 ‚Äî 16:10</td><td>-</td></tr>
            <tr><td onclick="selectTrip('16:30', this)">16:30 ‚Äî 17:00</td><td onclick="selectTrip('16:40', this)">16:40 ‚Äî 17:20</td><td>-</td></tr>
            <tr><td onclick="selectTrip('17:30', this)">17:30 ‚Äî 18:00</td><td onclick="selectTrip('18:00', this)">18:00 ‚Äî 18:40</td><td>-</td></tr>
            <tr><td onclick="selectTrip('18:00', this)">18:00 ‚Äî 18:30</td><td onclick="selectTrip('19:40', this)">19:40 ‚Äî 20:10</td><td>-</td></tr>
            <tr><td onclick="selectTrip('19:40', this)">19:40 ‚Äî 20:10</td><td>-</td><td>-</td></tr>
        </tbody>
    </table>
</div>

<button class="share-btn" onclick="shareApp()">üîó –ü–û–î–Ü–õ–ò–¢–ò–°–Ø</button>

<div class="instructions">
    <h3>–Ø–∫ –∑–±–µ—Ä–µ–≥—Ç–∏ —Ä–æ–∑–∫–ª–∞–¥ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ?</h3>
    <div class="step">
        <b>Android (Chrome):</b> –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ —Ç—Ä–∏ –∫—Ä–∞–ø–∫–∏ (‚ãÆ) —Ç–∞ –æ–±–µ—Ä—ñ—Ç—å <b>¬´–î–æ–¥–∞—Ç–∏ –Ω–∞ –≥–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω¬ª</b>.
    </div>
    <div class="step">
        <b>iPhone (Safari):</b> –ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è¬ª ‚Üí <b>¬´–ù–∞ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –µ–∫—Ä–∞–Ω¬ª</b>.
    </div>
</div>

<script>
    const bibleVerses = [
        "¬´–ü—Ä–æ–º–æ–≤–ª—è—î –¥–æ –Ω—å–æ–≥–æ –Ü—Å—É—Å: –Ø ‚Äî –¥–æ—Ä–æ–≥–∞, —ñ –ø—Ä–∞–≤–¥–∞, —ñ –∂–∏—Ç—Ç—è. –î–æ –û—Ç—Ü—è –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –Ω—ñ—Ö—Ç–æ, —è–∫—â–æ –Ω–µ —á–µ—Ä–µ–∑ –ú–µ–Ω–µ¬ª (–Ü–≤–∞–Ω–∞ 14:6)",
        "¬´–ë–æ —Ç–∞–∫ –ø–æ–ª—é–±–∏–≤ –ë–æ–≥ —Å–≤—ñ—Ç, —â–æ –≤—ñ–¥–¥–∞–≤ –°–∏–Ω–∞ –°–≤–æ–≥–æ...¬ª (–Ü–≤–∞–Ω–∞ 3:16)",
        "¬´–ì–æ—Å–ø–æ–¥—å ‚Äî —Ç–æ –º—ñ–π –ü–∞—Å—Ç–∏—Ä, —Ç–æ–º—É –≤ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫—É –Ω–µ –±—É–¥—É¬ª (–ü—Å–∞–ª–æ–º 22:1)",
        "¬´–í—Å–µ –º–æ–∂—É –≤ –¢—ñ–º, –•—Ç–æ –º–µ–Ω–µ –ø—ñ–¥–∫—Ä—ñ–ø–ª—è—î...¬ª (–§–∏–ª–∏–ø'—è–Ω 4:13)"
    ];

    async function fetchWeather() {
        try {
            const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=48.50&longitude=32.26&current_weather=true&timezone=auto');
            const data = await response.json();
            const temp = Math.round(data.current_weather.temperature);
            const code = data.current_weather.weathercode;
            
            document.getElementById('weather-info').innerText = `–ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–∏–π: ${temp}¬∞C`;
            
            let wish = "–ì–∞—Ä–Ω–æ–≥–æ —Ç–∞ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–Ω–æ–≥–æ –¥–Ω—è!";
            if (code >= 51) wish = "‚òîÔ∏è –ó–¥–∞—î—Ç—å—Å—è, –¥–æ—â–∏—Ç—å. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–∞—Ä–∞—Å–æ–ª—å–∫—É!";
            else if (temp < -2) wish = "‚ùÑÔ∏è –ù–∞ –≤—É–ª–∏—Ü—ñ –º–æ—Ä–æ–∑. –û–¥—è–≥–∞–π—Ç–µ—Å—è —Ç–µ–ø–ª—ñ—à–µ!";
            else if (temp > 28) wish = "‚òÄÔ∏è –°–ø–µ–∫–æ—Ç–Ω–æ. –í—ñ–∑—å–º—ñ—Ç—å –ø–ª—è—à–µ—á–∫—É –≤–æ–¥–∏.";
            else if (code >= 1 && code <= 3) wish = "‚òÅÔ∏è –°—å–æ–≥–æ–¥–Ω—ñ —Ö–º–∞—Ä–Ω–æ. –ì–∞—Ä–Ω–æ—ó –≤–∞–º –ø–æ—ó–∑–¥–∫–∏!";

            document.getElementById('wish-text').innerText = wish;
        } catch (e) {
            document.getElementById('weather-info').innerText = "–ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–∏–π: –ø–æ–≥–æ–¥–∞ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è";
        }
    }

    function shareApp() {
        if (navigator.share) {
            navigator.share({
                title: '–†–æ–∑–∫–ª–∞–¥ –ê–≤—Ç–æ–±—É—Å–∞ 283',
                url: window.location.href
            });
        }
    }

    window.onload = function() {
        const randomIndex = Math.floor(Math.random() * bibleVerses.length);
        document.getElementById('bible-quote').innerText = bibleVerses[randomIndex];
        fetchWeather();
    };

    let activeTime = "";
    function selectTrip(time, el) {
        activeTime = time;
        document.querySelectorAll('td').forEach(t => t.classList.remove('selected'));
        el.classList.add('selected');
        document.getElementById('timer-block').style.display = 'block';
        document.getElementById('calBtn').style.display = 'inline-block';
        updateTimer(time);
    }

    function updateTimer(time) {
        const [h, m] = time.split(':');
        let target = new Date(); target.setHours(parseInt(h), parseInt(m), 0);
        if (target < new Date()) target.setDate(target.getDate() + 1);
        if (window.tInt) clearInterval(window.tInt);
        window.tInt = setInterval(() => {
            const diff = target - new Date();
            if (diff <= 0) { clearInterval(window.tInt); return; }
            const hrs = Math.floor(diff/3600000).toString().padStart(2,'0');
            const mns = Math.floor((diff%3600000)/60000).toString().padStart(2,'0');
            const scs = Math.floor((diff%60000)/1000).toString().padStart(2,'0');
            document.getElementById('countdown').innerText = hrs+":"+mns+":"+scs;
        }, 1000);
    }
</script>
</body>
</html>
